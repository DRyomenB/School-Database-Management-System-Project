{% extends "base.html" %}
{% block content %}
<h2>Admin Dashboard</h2>

<div class="cards">
    <div class="card">
        <h3>Students</h3>
        <p>{{ student_count }}</p>
        <a href="{{ url_for('admin_students') }}">View students</a>
    </div>
    <div class="card">
        <h3>Courses</h3>
        <p>{{ course_count }}</p>
        <a href="{{ url_for('admin_courses') }}">View courses</a>
    </div>
    <div class="card">
        <h3>Instructors</h3>
        <p>{{ instructor_count }}</p>
        <a href="{{ url_for('admin_instructors') }}">View instructors</a>
    </div>
    <div class="card">
        <h3>Enrollments</h3>
        <p>{{ enrollment_count }}</p>
    </div>
</div>

<h3>Students by Department</h3>
<div class="bar-chart">
    {% for row in dept_stats %}
    {% set width =  (row.student_count / max_students * 100) if max_students else 0 %}
    <div class="bar-row">
        <span class="bar-label">{{ row.department_name }} ({{ row.student_count }})</span>
        <div class="bar">
            <div class="bar-fill" style="width: {{ width }}%;"></div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}