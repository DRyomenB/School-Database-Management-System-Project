{% extends "base.html" %}
{% block content %}
<h2 class="page-title">Department Budgets</h2>
<a class="btn-add" href="{{ url_for('admin_add_budget') }}">+ Add Budget</a>
<table class="styled-table">
    <thead>
        <tr>
            <th>Department</th>
            <th>Fiscal Year</th>
            <th>Allocated</th>
            <th>Spent</th>
            <th>Remaining</th>
        </tr>
    </thead>
    <tbody>
        {% for b in budgets %}
        <tr>
            <td>{{ b.department_name }}</td>
            <td>{{ b.fiscal_year }}</td>
            <td>${{ "%.2f"|format(b.allocated_amount) }}</td>
            <td>${{ "%.2f"|format(b.spent_amount) }}</td>
            <td>
                {% set remaining = b.allocated_amount - b.spent_amount %}
                {% if remaining < 0 %}
                <span style="color: red;">-${{ "%.2f"|format(remaining|abs) }}</span>
                {% else %}
                ${{ "%.2f"|format(remaining) }}
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}